{
  "name": "mgmt",
  "type": "MGMT",
  "roles": [
  {%- set role_sep = joiner(",") -%}
  {%- for role in role_mappings.MGMT -%}
  {{ role_sep() }}
    {
      "name": "mgmt-{{ role }}",
      "type": "{{ role }}",
      "roleConfigGroupRef": {
        "roleConfigGroupName": "mgmt-{{ role }}-BASE"
      },
      "hostRef": {
        "hostId": "{{ scm_host_ids[scm_host] }}"
      }
    }
  {%- endfor -%}
  ],
  "roleConfigGroups": [
  {%- set role_group_sep = joiner(",") -%}
  {%- for role in role_mappings.MGMT -%}
  {{ role_group_sep() }}
    {
      "name": "mgmt-{{ role }}-BASE",
      "roleType": "{{ role }}",
      "base": true,
      "serviceRef": {
        "serviceName": "mgmt"
      },
      "config": {
        
        {%- if scm_configs.MGMT[role] is mapping -%}
        "items": [
        {%- set config_sep = joiner(",") -%}
        {%- for (k,v) in scm_configs.MGMT[role].iteritems() -%}
        {{ config_sep() }}
          {%- if (v is sameas true) or (v is sameas false) -%}
          {
            "name" : "{{ k | lower }}",
            "value" : {{ v | lower }}
          }
          {%- else -%}
          {
            "name" : "{{ k | lower }}",
            "value" : "{{ v }}"
          }
          {%- endif -%}
        {%- endfor -%}
        ]
        {%- else -%}
        "items": []
        {%- endif -%}
      }
    }
  {%- endfor -%}
  ]
}